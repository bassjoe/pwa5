import{_ as u}from"./preload-helper-b21cceae.js";function W(v={}){const{immediate:w=!1,onNeedRefresh:o,onOfflineReady:s,onRegistered:d,onRegisteredSW:l,onRegisterError:c}=v;let i,t,g,n;const f=async(r=!0)=>{await g,r&&(i==null||i.addEventListener("controlling",a=>{a.isUpdate&&window.location.reload()})),await(n==null?void 0:n())};async function p(){if("serviceWorker"in navigator){const{Workbox:r,messageSW:a}=await u(()=>import("./workbox-window.prod.es5-5729c1a5.js"),[],import.meta.url);n=async()=>{t&&t.waiting&&await a(t.waiting,{type:"SKIP_WAITING"})},i=new r("./sw.js",{scope:"./",type:"classic"}),i.addEventListener("activated",e=>{e.isUpdate||s==null||s()});{const e=()=>{o==null||o()};i.addEventListener("waiting",e),i.addEventListener("externalwaiting",e)}i.register({immediate:w}).then(e=>{t=e,l?l("./sw.js",e):d==null||d(e)}).catch(e=>{c==null||c(e)})}}return g=p(),f}export{W as registerSW};
