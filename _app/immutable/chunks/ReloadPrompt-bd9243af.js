import{S as I,i as U,s as V,e as N,b as g,B as S,h as p,E as P,k as h,a as O,q as y,l as R,m as b,c as A,r as w,n as k,D as v,M as C}from"./index-46fdc337.js";import{_ as j}from"./preload-helper-b21cceae.js";import{w as T}from"./singletons-faa898c9.js";function q(r={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:o,onRegistered:s,onRegisteredSW:l,onRegisterError:a}=r;let d,f;const _=async(n=!0)=>{await f};async function m(){if("serviceWorker"in navigator){const{Workbox:n,messageSW:c}=await j(()=>import("./workbox-window.prod.es5-5729c1a5.js"),[],import.meta.url);d=new n("./sw.js",{scope:"./",type:"classic"}),d.addEventListener("activated",i=>{i.isUpdate?window.location.reload():o==null||o()}),d.register({immediate:e}).then(i=>{l?l("./sw.js",i):s==null||s(i)}).catch(i=>{a==null||a(i)})}}return f=m(),_}function L(r={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:o,onRegistered:s,onRegisteredSW:l,onRegisterError:a}=r,d=T(!1),f=T(!1),_=q({immediate:e,onOfflineReady(){f.set(!0),o==null||o()},onNeedRefresh(){d.set(!0),t==null||t()},onRegistered:s,onRegisteredSW:l,onRegisterError:a});return{needRefresh:d,offlineReady:f,updateServiceWorker:_}}function D(r){let e,t,o,s,l,a,d,f;function _(i,u){return i[1]?z:M}let m=_(r),n=m(r),c=r[0]&&B(r);return{c(){e=h("div"),t=h("div"),n.c(),o=O(),c&&c.c(),s=O(),l=h("button"),a=y("Close"),this.h()},l(i){e=R(i,"DIV",{class:!0,role:!0});var u=b(e);t=R(u,"DIV",{class:!0});var E=b(t);n.l(E),E.forEach(p),o=A(u),c&&c.l(u),s=A(u),l=R(u,"BUTTON",{class:!0});var W=b(l);a=w(W,"Close"),W.forEach(p),u.forEach(p),this.h()},h(){k(t,"class","message svelte-141ior1"),k(l,"class","svelte-141ior1"),k(e,"class","pwa-toast svelte-141ior1"),k(e,"role","alert")},m(i,u){g(i,e,u),v(e,t),n.m(t,null),v(e,o),c&&c.m(e,null),v(e,s),v(e,l),v(l,a),d||(f=C(l,"click",r[6]),d=!0)},p(i,u){m!==(m=_(i))&&(n.d(1),n=m(i),n&&(n.c(),n.m(t,null))),i[0]?c?c.p(i,u):(c=B(i),c.c(),c.m(e,s)):c&&(c.d(1),c=null)},d(i){i&&p(e),n.d(),c&&c.d(),d=!1,f()}}}function M(r){let e,t;return{c(){e=h("span"),t=y("New content available, click on reload button to update.")},l(o){e=R(o,"SPAN",{});var s=b(e);t=w(s,"New content available, click on reload button to update."),s.forEach(p)},m(o,s){g(o,e,s),v(e,t)},d(o){o&&p(e)}}}function z(r){let e,t;return{c(){e=h("span"),t=y("App ready to work offline")},l(o){e=R(o,"SPAN",{});var s=b(e);t=w(s,"App ready to work offline"),s.forEach(p)},m(o,s){g(o,e,s),v(e,t)},d(o){o&&p(e)}}}function B(r){let e,t,o,s;return{c(){e=h("button"),t=y("Reload"),this.h()},l(l){e=R(l,"BUTTON",{class:!0});var a=b(e);t=w(a,"Reload"),a.forEach(p),this.h()},h(){k(e,"class","svelte-141ior1")},m(l,a){g(l,e,a),v(e,t),o||(s=C(e,"click",r[7]),o=!0)},p:S,d(l){l&&p(e),o=!1,s()}}}function F(r){let e,t=r[2]&&D(r);return{c(){t&&t.c(),e=N()},l(o){t&&t.l(o),e=N()},m(o,s){t&&t.m(o,s),g(o,e,s)},p(o,[s]){o[2]?t?t.p(o,s):(t=D(o),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:S,o:S,d(o){t&&t.d(o),o&&p(e)}}}function G(r,e,t){let o,s,l;const{needRefresh:a,updateServiceWorker:d,offlineReady:f}=L({onRegistered(n){console.log(`SW Registered: ${n}`)},onRegisterError(n){console.log("SW registration error",n)}});P(r,a,n=>t(0,s=n)),P(r,f,n=>t(1,l=n));const _=()=>{f.set(!1),a.set(!1)},m=()=>d(!0);return r.$$.update=()=>{r.$$.dirty&3&&t(2,o=l||s)},[s,l,o,a,d,f,_,m]}class Q extends I{constructor(e){super(),U(this,e,G,F,V,{})}}export{Q as default};
